var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&o(e,a,l[a]);if(t)for(var a of t(l))u.call(l,a)&&o(e,a,l[a]);return e};import{_ as i,d as r,n as c,o as d,c as p,m as v,r as f,a as y,F as g,u as w,b as h,e as m,f as _,g as b,h as x,i as k,w as C,j,N as U,k as P,T as z,l as O,p as T,A as F,C as L,q as S,P as $,s as I,t as A,S as R,v as B,x as D,y as E,z as H,B as M,D as N,E as q,G,H as V,I as J,J as K,K as Q,L as W,M as X,O as Y,Q as Z,R as ee,U as le,V as ae,W as te,X as se,Y as ue,Z as oe,$ as ne,a0 as ie,a1 as re}from"./vendor.f9c4cc5e.js";const ce={show:{type:Boolean,required:!0},vanish:Function,resolve:Function,reject:Function},de=i.props;var pe=r({props:n(n({},ce),de),setup:(e,{emit:l})=>{const a=e.show;a.value&&(a.value=!1,c((()=>a.value=!0)));return{props:e,onClone:()=>{var l,t;null==(l=e.reject)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},onConfirm:()=>{var l,t;null==(l=e.resolve)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},show:a}}});pe.render=function(e,l,a,t,s,u){const o=i;return d(),p(o,v({preset:"dialog"},e.props,{show:e.show,"onUpdate:show":l[1]||(l[1]=l=>e.show=l),onPositiveClick:e.onConfirm,onNegativeClick:e.onClone}),null,16,["show","onPositiveClick","onNegativeClick"])};const ve=e=>new Promise(((t,s)=>{var u,o;f(pe,(u=n({},e),o={show:y(!0),resolve:t,reject:s},l(u,a(o))))})),fe={class:"mr-24 flex flex-col items-center"},ye=E(" 新增分组 "),ge={class:"mb-12"},we=E("点击或者拖动文件到该区域来上传至当前分组"),he={class:"mt-12"},me=k("span",null,"单独写入 Svg ",-1),_e={class:"flex justify-between"},be=k("span",null,"导出 Fonts",-1),xe=E("全选"),ke=E("删除"),Ce=E("移动"),je=E("导入 SVG 是否保留颜色"),Ue={class:"mt-20 flex-1"},Pe={class:"grid gap-24",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},ze={class:"flex justify-end"},Oe=E("取消"),Te=E("确认"),Fe={class:"flex justify-end"},Le=E("取消"),Se=E("确认"),$e={class:"flex justify-end"},Ie=E("取消"),Ae=E("确认"),Re={class:"grid gap-24 w-full",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},Be={class:"flex justify-end"},De=E("取消"),Ee=E("确认");var He=r({setup(e){g.defaults.loading=!0;const l=w();let a;h(g,(()=>{a||(a=l.loading("加载中....",{duration:0}))}),(()=>{a&&(a.destroy(),a=void 0)}));const t=y(0),s=y([{label:"全部",key:0},{label:"未分组",key:1e4}]),u=y([]),o=y([]),n=m((()=>[...s.value,...u.value])),r=()=>{Me()},c=y({text:""}),v=y({key:"",value:"",group:void 0}),f=y({group:void 0}),oe=y({label:""}),ne=y({prefix:""}),ie=y(!0),re=y(!1),ce=y(!1),de=y(!1),pe=y(!1),{list:He,resetList:Me}=_({getList:async()=>{const{data:e}=await g.get("/json/fonts",{params:t.value&&{group:t.value}});return e},sources:[()=>c.value,()=>t.value]}),{selectItems:Ne,isSelectAll:qe}=b(He),{selectItems:Ge}=b(o),Ve=m((()=>Ne.value.map((e=>e.id)))),Je=async()=>{Ge.value.length||l.warning("请选择分组!");const{data:e}=await g.get("/out-fonts",{params:{prefix:ne.value.prefix,ids:Ge.value.map((e=>e.value))},responseType:"arraybuffer"});((e,l)=>{const a=new Blob([e]),t=window.URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",`${l}.zip`),document.body.appendChild(s),s.click()})(e,"iconfont")},Ke=async()=>{const{data:e}=await g.get("/json/group");u.value=e.map((e=>({label:()=>k("div",{class:"flex items-center justify-between"},[k(U,{style:"max-width: 90px;"},{default:()=>[k("span",null,[e.label])]}),k(P,{class:"-mt-4",size:"15px",onClick:l=>{Qe(e),l.stopPropagation()}},{default:()=>[k(z,null,null)]})]),key:e.id}))),o.value=[{label:"未分组",value:1e4,select:!0},...e.map((e=>({select:!0,label:e.label,value:e.id})))]},Qe=async e=>{await ve({preset:"dialog",type:"warning",title:"提示",content:"你确定要删除该分组吗？",positiveText:"确定",negativeText:"不确定"}),await g.delete(`/json/group/${e.id}`);const{data:a}=await g.get("/json/fonts");await Promise.all(a.filter((l=>l.group===e.id)).map((e=>g.delete(`/json/fonts/${e.id}`)))),await Ke(),l.success("删除成功!")},We=async()=>{await ve({preset:"dialog",type:"warning",title:"提示",content:`你确定要删除当前 ${Ne.value.length} 項图标吗？`,positiveText:"确定",negativeText:"不确定"}),await Promise.all(Ve.value.map((e=>g.delete(`/json/fonts/${e}`)))),await Me(),l.success("删除成功!")},Xe=async()=>{const e=H.exports.cloneDeep(v.value);return e.value=e.value.replace(/\n/g,"").replace(/width="(\w*%?)"/g,"").replace(/height="(\w*%?)"/g,"").trim(),ie.value||(e.value=e.value.replace(/fill="(\w*%?)"/g,'fill="currentColor"')),e.key?/^<svg.*>.*<\/svg>/.test(e.value)?(e.group=e.group||t.value||1e4,await g.post("/json/fonts",e),H.exports.forIn(v.value,((e,l)=>v.value[l]="")),v.value.group=void 0,re.value=!1,await Me(),void l.success("添加成功!")):l.error("内容不符合 svg 标签格式"):l.error("名称不能为空")},Ye=async()=>{await Promise.all(Ve.value.map((e=>g.patch(`/json/fonts/${e}`,f.value)))),await Me(),l.success("移动成功!"),ce.value=!1},Ze=async()=>{await g.post("/json/group",oe.value),await Ke(),l.success("添加成功!"),de.value=!1};return x((()=>{Ke()})),(e,l)=>{const a=M,s=N,u=q,y=G,g=V,w=J,h=K,m=Q,_=W,b=ue,x=X,z=Y,H=Z,ve=O,Me=ee,Ne=le,Ge=ae,Ve=i;return d(),p(j,null,[k(ve,{class:"rounded-3xl",title:"Fonts Administration",style:{height:"calc(100vh - 50px)","min-height":"470px"},bordered:!1},{default:C((()=>[k(H,{"has-sider":"",class:"h-full"},{default:C((()=>[k(u,{width:176,bordered:""},{default:C((()=>[k("div",fe,[k(a,{class:"my-24 w-128",type:"primary",onClick:l[1]||(l[1]=e=>de.value=!0)},{icon:C((()=>[k(T(P),null,{default:C((()=>[k(T(F))])),_:1})])),default:C((()=>[ye])),_:1}),k(s,{class:"w-full",value:t.value,"onUpdate:value":l[2]||(l[2]=e=>t.value=e),options:T(n)},null,8,["value","options"])])])),_:1}),k(z,{class:"ml-24","content-style":"display: flex; flex-direction: column;height:100%","native-scrollbar":!1},{default:C((()=>[k(w,{class:"mb-12",action:"/upload-svgs",accept:".svg",name:"files","default-upload":!0,multiple:!0,data:{group:String(t.value||1e4),isRetainColor:String(ie.value)},onFinish:r},{default:C((()=>[k(g,null,{default:C((()=>[k("div",ge,[k(T(P),{size:"48",depth:3},{default:C((()=>[k(T(L))])),_:1})]),k(y,{class:"text-sm"},{default:C((()=>[we])),_:1}),k("div",he,[k(a,{class:"w-128",type:"primary",onClick:l[3]||(l[3]=S((e=>re.value=!0),["stop"]))},{default:C((()=>[k(T(P),{class:"mr-2"},{default:C((()=>[k(T($))])),_:1}),me])),_:1})])])),_:1})])),_:1},8,["data"]),k("div",_e,[k(m,{class:"items-center leading-none",size:"large"},{default:C((()=>[k(a,{class:"w-128",type:"primary",onClick:l[4]||(l[4]=e=>pe.value=!0)},{default:C((()=>[k(T(P),{class:"mr-2"},{default:C((()=>[k(T(I))])),_:1}),be])),_:1}),k(h,{checked:T(qe),"onUpdate:checked":l[5]||(l[5]=e=>A(qe)?qe.value=e:null)},{default:C((()=>[xe])),_:1},8,["checked"]),k(a,{text:"",onClick:We},{default:C((()=>[ke])),_:1}),k(a,{text:"",onClick:l[6]||(l[6]=e=>ce.value=!0)},{default:C((()=>[Ce])),_:1}),k(h,{checked:ie.value,"onUpdate:checked":l[7]||(l[7]=e=>ie.value=e)},{default:C((()=>[je])),_:1},8,["checked"])])),_:1}),k(_,{class:"w-160",placeholder:"查询图标",value:c.value.text,"onUpdate:value":l[8]||(l[8]=e=>c.value.text=e),round:""},{suffix:C((()=>[k(T(P),{class:"cursor-pointer"},{default:C((()=>[k(T(R))])),_:1})])),_:1},8,["value"])]),k("div",Ue,[k("div",Pe,[(d(!0),p(j,null,B(T(He),((e,l)=>(d(),p(b,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(T(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k("div",{class:"inline-block",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024),k(b,{tag:"div",class:"select-none"},{default:C((()=>[E(te(e.key),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))]),T(He).length?D("",!0):(d(),p(x,{key:0,class:"h-full flex justify-center",description:"你什么也找不到",size:"huge"}))])])),_:1})])),_:1})])),_:1}),k(Ve,{show:re.value,"onUpdate:show":l[13]||(l[13]=e=>re.value=e),preset:"card",style:{width:"600px"},title:"新增 svg",size:"huge",bordered:!1},{default:C((()=>[k(Ge,{"label-placement":"left"},{default:C((()=>[k(Me,{label:"名称",path:"key"},{default:C((()=>[k(_,{placeholder:"请输入 svg 名称",value:v.value.key,"onUpdate:value":l[9]||(l[9]=e=>v.value.key=e)},null,8,["value"])])),_:1}),k(Me,{label:"内容",path:"key"},{default:C((()=>[k(_,{class:"h-112",value:v.value.value,"onUpdate:value":l[10]||(l[10]=e=>v.value.value=e),type:"textarea",placeholder:"请输入 svg 标签"},null,8,["value"])])),_:1}),k(Me,{label:"分组"},{default:C((()=>[k(Ne,{placeholder:"请选择分组(默认当前分组)",value:v.value.group,"onUpdate:value":l[11]||(l[11]=e=>v.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",ze,[k(m,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[12]||(l[12]=e=>re.value=!1)},{default:C((()=>[Oe])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Xe},{default:C((()=>[Te])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ve,{show:ce.value,"onUpdate:show":l[16]||(l[16]=e=>ce.value=e),preset:"card",style:{width:"600px"},title:"移动分组",size:"huge",bordered:!1},{default:C((()=>[k(Ge,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(Me,{label:"分组"},{default:C((()=>[k(Ne,{placeholder:"请选择分组",value:f.value.group,"onUpdate:value":l[14]||(l[14]=e=>f.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",Fe,[k(m,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[15]||(l[15]=e=>ce.value=!1)},{default:C((()=>[Le])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Ye},{default:C((()=>[Se])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ve,{show:de.value,"onUpdate:show":l[19]||(l[19]=e=>de.value=e),preset:"card",style:{width:"600px"},title:"新增分组",size:"huge",bordered:!1},{default:C((()=>[k(Ge,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(Me,{label:"名称"},{default:C((()=>[k(_,{placeholder:"请输入分组名称",value:oe.value.label,"onUpdate:value":l[17]||(l[17]=e=>oe.value.label=e)},null,8,["value"])])),_:1})])),_:1}),k("div",$e,[k(m,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[18]||(l[18]=e=>de.value=!1)},{default:C((()=>[Ie])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Ze},{default:C((()=>[Ae])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ve,{show:pe.value,"onUpdate:show":l[22]||(l[22]=e=>pe.value=e),preset:"card",style:{width:"600px"},title:"导出 fonts",size:"huge",bordered:!1},{default:C((()=>[k(Ge,{class:"mb-24"},{default:C((()=>[k(Me,{label:"导出 css 前缀"},{default:C((()=>[k(_,{placeholder:"请输入前缀（ 默认 'iconfont' ）",value:ne.value.prefix,"onUpdate:value":l[20]||(l[20]=e=>ne.value.prefix=e)},null,8,["value"])])),_:1}),k(Me,{label:"选择分组"},{default:C((()=>[k("div",Re,[(d(!0),p(j,null,B(o.value,((e,l)=>(d(),p(b,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(T(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k(T(se))])),_:1}),k(b,{tag:"div",class:"select-none mt-1"},{default:C((()=>[k(T(U),{style:{"max-width":"80px"}},{default:C((()=>[E(te(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])])),_:1}),k("div",Be,[k(m,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[21]||(l[21]=e=>pe.value=!1)},{default:C((()=>[De])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Je},{default:C((()=>[Ee])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"])],64)}}});re(r({setup:e=>(e,l)=>{const a=ne,t=ie,s=oe;return d(),p(s,{class:"xl:container"},{default:C((()=>[k(t,null,{default:C((()=>[k(a,null,{default:C((()=>[k(He)])),_:1})])),_:1})])),_:1})}})).mount("#app");
