var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,n=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))u.call(a,l)&&o(e,l,a[l]);return e};import{_ as i,d as r,n as c,o as d,c as p,m as v,r as f,a as y,D as g,u as m,b as w,e as h,f as _,g as b,h as x,i as k,w as C,F as j,N as U,j as P,T as z,k as O,l as L,A as T,C as $,p as F,P as S,q as R,s as I,S as A,t as B,v as D,x as E,y as H,B as M,z as N,E as q,G,H as V,I as J,J as K,K as Q,L as W,M as X,O as Y,Q as Z,R as ee,U as ae,V as le,W as te,X as se,Y as ue,Z as oe,$ as ne,a0 as ie,a1 as re}from"./vendor.87683bc6.js";const ce={show:{type:Boolean,required:!0},vanish:Function,resolve:Function,reject:Function},de=i.props;var pe=r({props:n(n({},ce),de),setup:(e,{emit:a})=>{const l=e.show;l.value&&(l.value=!1,c((()=>l.value=!0)));return{props:e,onClone:()=>{var a,t;null==(a=e.reject)||a.call(e),l.value=!1,null==(t=e.vanish)||t.call(e)},onConfirm:()=>{var a,t;null==(a=e.resolve)||a.call(e),l.value=!1,null==(t=e.vanish)||t.call(e)},show:l}}});pe.render=function(e,a,l,t,s,u){const o=i;return d(),p(o,v({preset:"dialog"},e.props,{show:e.show,"onUpdate:show":a[1]||(a[1]=a=>e.show=a),onPositiveClick:e.onConfirm,onNegativeClick:e.onClone}),null,16,["show","onPositiveClick","onNegativeClick"])};const ve=e=>new Promise(((t,s)=>{var u,o;f(pe,(u=n({},e),o={show:y(!0),resolve:t,reject:s},a(u,l(o))))})),fe={class:"mr-24 flex flex-col items-center"},ye=E(" 新增分组 "),ge={class:"mb-12"},me=E("点击或者拖动文件到该区域来上传至当前分组"),we={class:"mt-12"},he=k("span",null,"单独写入 Svg ",-1),_e={class:"flex justify-between"},be=k("span",null,"导出 Fonts",-1),xe=E("全选"),ke=E("删除"),Ce=E("移动"),je=E("导入 SVG 是否保留颜色"),Ue={class:"mt-20 flex-1"},Pe={class:"grid gap-24",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},ze={class:"flex justify-end"},Oe=E("取消"),Le=E("确认"),Te={class:"flex justify-end"},$e=E("取消"),Fe=E("确认"),Se={class:"flex justify-end"},Re=E("取消"),Ie=E("确认"),Ae={class:"grid gap-24 w-full",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},Be={class:"flex justify-end"},De=E("取消"),Ee=E("确认");var He=r({expose:[],setup(e){g.defaults.baseURL="",g.defaults.loading=!0;const a=m();let l;w(g,(()=>{l||(l=a.loading("加载中....",{duration:0}))}),(()=>{l&&(l.destroy(),l=void 0)}));const t=y(0),s=y([{label:"全部",key:0},{label:"未分组",key:1e4}]),u=y([]),o=y([]),n=h((()=>[...s.value,...u.value])),r=()=>{Me()},c=y({text:""}),v=y({key:"",value:"",group:void 0}),f=y({group:void 0}),oe=y({label:""}),ne=y({prefix:""}),ie=y(!0),re=y(!1),ce=y(!1),de=y(!1),pe=y(!1),{list:He,resetList:Me}=_({getList:async()=>{const{data:e}=await g.get("/json/fonts",{params:t.value&&{group:t.value}});return e},sources:[()=>c.value,()=>t.value]}),{selectItems:Ne,isSelectAll:qe}=b(He),{selectItems:Ge}=b(o),Ve=h((()=>Ne.value.map((e=>e.id)))),Je=async()=>{Ge.value.length||a.warning("请选择分组!");const{data:e}=await g.get("/out-fonts",{params:{prefix:ne.value.prefix,ids:Ge.value.map((e=>e.value))},responseType:"arraybuffer"});((e,a)=>{const l=new Blob([e]),t=window.URL.createObjectURL(l),s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",`${a}.zip`),document.body.appendChild(s),s.click()})(e,"iconfont")},Ke=async()=>{const{data:e}=await g.get("/json/group");u.value=e.map((e=>({label:()=>k("div",{class:"flex items-center justify-between"},[k(U,{style:"max-width: 90px;"},{default:()=>[k("span",null,[e.label])]}),k(P,{class:"-mt-4",size:"15px",onClick:a=>{Qe(e),a.stopPropagation()}},{default:()=>[k(z,null,null)]})]),key:e.id}))),o.value=[{label:"未分组",value:1e4,select:!0},...e.map((e=>({select:!0,label:e.label,value:e.id})))]},Qe=async e=>{await ve({preset:"dialog",type:"warning",title:"提示",content:"你确定要删除该分组吗？",positiveText:"确定",negativeText:"不确定"}),await g.delete(`/json/group/${e.id}`);const{data:l}=await g.get("/json/fonts");await Promise.all(l.filter((a=>a.group===e.id)).map((e=>g.delete(`/json/fonts/${e.id}`)))),await Ke(),a.success("删除成功!")},We=async()=>{await ve({preset:"dialog",type:"warning",title:"提示",content:`你确定要删除当前 ${Ne.value.length} 項图标吗？`,positiveText:"确定",negativeText:"不确定"}),await Promise.all(Ve.value.map((e=>g.delete(`/json/fonts/${e}`)))),await Me(),a.success("删除成功!")},Xe=async()=>{const e=H.exports.cloneDeep(v.value);return e.value=e.value.replace(/\n/g,"").trim(),ie.value||(e.value=e.value.replace(/fill="(\w*%?)"/g,'fill="currentColor"')),e.key?/^<svg.*>.*<\/svg>/.test(e.value)?(e.group=e.group||t.value||1e4,await g.post("/json/fonts",e),H.exports.forIn(v.value,((e,a)=>v.value[a]="")),v.value.group=void 0,re.value=!1,await Me(),void a.success("添加成功!")):a.error("内容不符合 svg 标签格式"):a.error("名称不能为空")},Ye=async()=>{await Promise.all(Ve.value.map((e=>g.patch(`/json/fonts/${e}`,f.value)))),await Me(),a.success("移动成功!"),ce.value=!1},Ze=async()=>{await g.post("/json/group",oe.value),await Ke(),a.success("添加成功!"),de.value=!1};return x((()=>{Ke()})),(e,a)=>{const l=M,s=N,u=q,y=G,m=V,w=J,h=K,_=Q,b=W,x=ue,z=X,H=Y,ve=Z,Me=O,Ne=ee,Ge=ae,Ve=le,Ke=i;return d(),p(j,null,[k(Me,{class:"rounded-3xl",title:"Fonts Administration",style:{height:"calc(100vh - 50px)","min-height":"470px"},bordered:!1},{default:C((()=>[k(ve,{"has-sider":"",class:"h-full"},{default:C((()=>[k(u,{width:176,bordered:""},{default:C((()=>[k("div",fe,[k(l,{class:"my-24 w-128",type:"primary",onClick:a[1]||(a[1]=e=>de.value=!0)},{icon:C((()=>[k(L(P),null,{default:C((()=>[k(L(T))])),_:1})])),default:C((()=>[ye])),_:1}),k(s,{class:"w-full",value:t.value,"onUpdate:value":a[2]||(a[2]=e=>t.value=e),options:L(n)},null,8,["value","options"])])])),_:1}),k(H,{class:"ml-24","content-style":"display: flex; flex-direction: column;height:100%","native-scrollbar":!1},{default:C((()=>[k(w,{class:"mb-12",action:`${L(g).defaults.baseURL}/upload-svgs`,accept:".svg",name:"files","default-upload":!0,multiple:!0,data:{group:String(t.value||1e4),isRetainColor:String(ie.value)},onFinish:r},{default:C((()=>[k(m,null,{default:C((()=>[k("div",ge,[k(L(P),{size:"48",depth:3},{default:C((()=>[k(L($))])),_:1})]),k(y,{class:"text-sm"},{default:C((()=>[me])),_:1}),k("div",we,[k(l,{class:"w-128",type:"primary",onClick:a[3]||(a[3]=F((e=>re.value=!0),["stop"]))},{default:C((()=>[k(L(P),{class:"mr-2"},{default:C((()=>[k(L(S))])),_:1}),he])),_:1})])])),_:1})])),_:1},8,["action","data"]),k("div",_e,[k(_,{class:"items-center leading-none",size:"large"},{default:C((()=>[k(l,{class:"w-128",type:"primary",onClick:a[4]||(a[4]=e=>pe.value=!0)},{default:C((()=>[k(L(P),{class:"mr-2"},{default:C((()=>[k(L(R))])),_:1}),be])),_:1}),k(h,{checked:L(qe),"onUpdate:checked":a[5]||(a[5]=e=>I(qe)?qe.value=e:null)},{default:C((()=>[xe])),_:1},8,["checked"]),k(l,{text:"",onClick:We},{default:C((()=>[ke])),_:1}),k(l,{text:"",onClick:a[6]||(a[6]=e=>ce.value=!0)},{default:C((()=>[Ce])),_:1}),k(h,{checked:ie.value,"onUpdate:checked":a[7]||(a[7]=e=>ie.value=e)},{default:C((()=>[je])),_:1},8,["checked"])])),_:1}),k(b,{class:"w-160",placeholder:"查询图标",value:c.value.text,"onUpdate:value":a[8]||(a[8]=e=>c.value.text=e),round:""},{suffix:C((()=>[k(L(P),{class:"cursor-pointer"},{default:C((()=>[k(L(A))])),_:1})])),_:1},8,["value"])]),k("div",Ue,[k("div",Pe,[(d(!0),p(j,null,B(L(He),((e,a)=>(d(),p(x,{key:a,onClick:a=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(L(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k("div",{class:"inline-block",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024),k(x,{tag:"div",class:"select-none"},{default:C((()=>[E(te(e.key),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))]),L(He).length?D("",!0):(d(),p(z,{key:0,class:"h-full flex justify-center",description:"你什么也找不到",size:"huge"}))])])),_:1})])),_:1})])),_:1}),k(Ke,{show:re.value,"onUpdate:show":a[13]||(a[13]=e=>re.value=e),preset:"card",style:{width:"600px"},title:"新增 svg",size:"huge",bordered:!1},{default:C((()=>[k(Ve,{"label-placement":"left"},{default:C((()=>[k(Ne,{label:"名称",path:"key"},{default:C((()=>[k(b,{placeholder:"请输入 svg 名称",value:v.value.key,"onUpdate:value":a[9]||(a[9]=e=>v.value.key=e)},null,8,["value"])])),_:1}),k(Ne,{label:"内容",path:"key"},{default:C((()=>[k(b,{class:"h-112",value:v.value.value,"onUpdate:value":a[10]||(a[10]=e=>v.value.value=e),type:"textarea",placeholder:"请输入 svg 标签"},null,8,["value"])])),_:1}),k(Ne,{label:"分组"},{default:C((()=>[k(Ge,{placeholder:"请选择分组(默认当前分组)",value:v.value.group,"onUpdate:value":a[11]||(a[11]=e=>v.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",ze,[k(_,null,{default:C((()=>[k(l,{class:"w-112",onClick:a[12]||(a[12]=e=>re.value=!1)},{default:C((()=>[Oe])),_:1}),k(l,{type:"primary",class:"w-112",onClick:Xe},{default:C((()=>[Le])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ke,{show:ce.value,"onUpdate:show":a[16]||(a[16]=e=>ce.value=e),preset:"card",style:{width:"600px"},title:"移动分组",size:"huge",bordered:!1},{default:C((()=>[k(Ve,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(Ne,{label:"分组"},{default:C((()=>[k(Ge,{placeholder:"请选择分组",value:f.value.group,"onUpdate:value":a[14]||(a[14]=e=>f.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",Te,[k(_,null,{default:C((()=>[k(l,{class:"w-112",onClick:a[15]||(a[15]=e=>ce.value=!1)},{default:C((()=>[$e])),_:1}),k(l,{type:"primary",class:"w-112",onClick:Ye},{default:C((()=>[Fe])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ke,{show:de.value,"onUpdate:show":a[19]||(a[19]=e=>de.value=e),preset:"card",style:{width:"600px"},title:"新增分组",size:"huge",bordered:!1},{default:C((()=>[k(Ve,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(Ne,{label:"名称"},{default:C((()=>[k(b,{placeholder:"请输入分组名称",value:oe.value.label,"onUpdate:value":a[17]||(a[17]=e=>oe.value.label=e)},null,8,["value"])])),_:1})])),_:1}),k("div",Se,[k(_,null,{default:C((()=>[k(l,{class:"w-112",onClick:a[18]||(a[18]=e=>de.value=!1)},{default:C((()=>[Re])),_:1}),k(l,{type:"primary",class:"w-112",onClick:Ze},{default:C((()=>[Ie])),_:1})])),_:1})])])),_:1},8,["show"]),k(Ke,{show:pe.value,"onUpdate:show":a[22]||(a[22]=e=>pe.value=e),preset:"card",style:{width:"600px"},title:"导出 fonts",size:"huge",bordered:!1},{default:C((()=>[k(Ve,{class:"mb-24"},{default:C((()=>[k(Ne,{label:"导出 css 前缀"},{default:C((()=>[k(b,{placeholder:"请输入前缀（ 默认 'iconfont' ）",value:ne.value.prefix,"onUpdate:value":a[20]||(a[20]=e=>ne.value.prefix=e)},null,8,["value"])])),_:1}),k(Ne,{label:"选择分组"},{default:C((()=>[k("div",Ae,[(d(!0),p(j,null,B(o.value,((e,a)=>(d(),p(x,{key:a,onClick:a=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(L(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k(L(se))])),_:1}),k(x,{tag:"div",class:"select-none mt-1"},{default:C((()=>[k(L(U),{style:{"max-width":"80px"}},{default:C((()=>[E(te(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])])),_:1}),k("div",Be,[k(_,null,{default:C((()=>[k(l,{class:"w-112",onClick:a[21]||(a[21]=e=>pe.value=!1)},{default:C((()=>[De])),_:1}),k(l,{type:"primary",class:"w-112",onClick:Je},{default:C((()=>[Ee])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"])],64)}}});re(r({expose:[],setup:e=>(e,a)=>{const l=ne,t=ie,s=oe;return d(),p(s,{class:"xl:container"},{default:C((()=>[k(t,null,{default:C((()=>[k(l,null,{default:C((()=>[k(He)])),_:1})])),_:1})])),_:1})}})).mount("#app");
