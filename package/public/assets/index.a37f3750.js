var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&o(e,a,l[a]);if(t)for(var a of t(l))u.call(l,a)&&o(e,a,l[a]);return e};import{_ as i,d as r,n as c,o as d,c as v,m as p,F as f,r as g,a as y,u as h,b as m,e as w,f as _,w as b,g as x,N as k,h as C,T as j,i as U,j as P,A as z,C as O,k as S,P as T,l as L,p as F,S as A,q as I,s as $,t as H,v as M,B as R,x as B,y as D,z as E,D as N,E as q,G,H as V,I as J,J as K,K as Q,L as W,M as X,O as Y,Q as Z,R as ee,U as le,V as ae,W as te,X as se,Y as ue,Z as oe}from"./vendor.83891122.js";const ne={show:{type:Boolean,required:!0},vanish:Function,resolve:Function,reject:Function},ie=i.props;var re=r({props:n(n({},ne),ie),setup:(e,{emit:l})=>{const a=e.show;a.value&&(a.value=!1,c((()=>a.value=!0)));return{props:e,onClone:()=>{var l,t;null==(l=e.reject)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},onConfirm:()=>{var l,t;null==(l=e.resolve)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},show:a}}});re.render=function(e,l,a,t,s,u){const o=i;return d(),v(o,p({preset:"dialog"},e.props,{show:e.show,"onUpdate:show":l[1]||(l[1]=l=>e.show=l),onPositiveClick:e.onConfirm,onNegativeClick:e.onClone}),null,16,["show","onPositiveClick","onNegativeClick"])};const ce=e=>new Promise(((t,s)=>{var u,o;f.renderInstance(re,(u=n({},e),o={show:g(!0),resolve:t,reject:s},l(u,a(o))))})),de={class:"mr-24 flex flex-col items-center"},ve=H(" 新增分组 "),pe={class:"mb-12"},fe=H("点击或者拖动文件到该区域来上传至当前分组"),ge={class:"mt-12"},ye=_("span",null,"单独写入 Svg ",-1),he={class:"flex justify-between"},me=_("span",null,"导出 Fonts",-1),we=H("全选"),_e=H("删除"),be=H("移动"),xe=H("导入 SVG 是否保留颜色"),ke={class:"mt-20 flex-1"},Ce={class:"grid gap-24",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},je={class:"flex justify-end"},Ue=H("取消"),Pe=H("确认"),ze={class:"flex justify-end"},Oe=H("取消"),Se=H("确认"),Te={class:"flex justify-end"},Le=H("取消"),Fe=H("确认"),Ae={class:"grid gap-24 w-full",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},Ie={class:"flex justify-end"},$e=H("取消"),He=H("确认");var Me=r({setup(e){y.defaults.loading=!0;const l=h();let a;f.axiosLoading(y,(()=>{a||(a=l.loading("加载中....",{duration:0}))}),(()=>{a&&(a.destroy(),a=void 0)}));const t=g(0),s=g([{label:"全部",key:0},{label:"未分组",key:1e4}]),u=g([]),o=g([]),n=m((()=>[...s.value,...u.value])),r=()=>{Be()},c=g({text:""}),p=g({key:"",value:"",group:void 0}),te=g({group:void 0}),se=g({label:""}),ue=g({prefix:""}),oe=g(!0),ne=g(!1),ie=g(!1),re=g(!1),Me=g(!1),{list:Re,resetList:Be}=f.useListPagination({getList:async()=>{const{data:e}=await y.get("/json/fonts",{params:t.value&&{group:t.value}});return e},sources:[()=>c.value,()=>t.value]}),{selectItems:De,isSelectAll:Ee}=f.useMultipleSelect(Re),{selectItems:Ne}=f.useMultipleSelect(o),qe=m((()=>De.value.map((e=>e.id)))),Ge=async()=>{Ne.value.length||l.warning("请选择分组!");const{data:e}=await y.get("/out-fonts",{params:{prefix:ue.value.prefix,ids:Ne.value.map((e=>e.value))},responseType:"arraybuffer"});((e,l)=>{const a=new Blob([e]),t=window.URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",`${l}.zip`),document.body.appendChild(s),s.click()})(e,"iconfont")},Ve=async()=>{const{data:e}=await y.get("/json/group");u.value=e.map((e=>({label:()=>_("div",{class:"flex items-center justify-between"},[_(k,{style:"max-width: 90px;"},{default:()=>[_("span",null,[e.label])]}),_(C,{class:"-mt-4",size:"15px",onClick:l=>{Je(e),l.stopPropagation()}},{default:()=>[_(j,null,null)]})]),key:e.id}))),o.value=[{label:"未分组",value:1e4,select:!0},...e.map((e=>({select:!0,label:e.label,value:e.id})))]},Je=async e=>{await ce({preset:"dialog",type:"warning",title:"提示",content:"你确定要删除该分组吗？",positiveText:"确定",negativeText:"不确定"}),await y.delete(`/json/group/${e.id}`);const{data:a}=await y.get("/json/fonts");await Promise.all(a.filter((l=>l.group===e.id)).map((e=>y.delete(`/json/fonts/${e.id}`)))),await Ve(),l.success("删除成功!")},Ke=async()=>{await ce({preset:"dialog",type:"warning",title:"提示",content:`你确定要删除当前 ${De.value.length} 項图标吗？`,positiveText:"确定",negativeText:"不确定"}),await Promise.all(qe.value.map((e=>y.delete(`/json/fonts/${e}`)))),await Be(),l.success("删除成功!")},Qe=async()=>{const e=M.exports.cloneDeep(p.value);return e.value=e.value.replace(/\n/g,"").replace(/width="(\w*%?)"/g,"").replace(/height="(\w*%?)"/g,"").trim(),oe.value||(e.value=f.setHtmlStrTagAttr({html:e.value,tag:"path",attr:"fill",value:"currentColor"}),e.value=f.setHtmlStrTagAttr({html:e.value,tag:"svg",attr:"fill",value:"currentColor"})),e.key?/^<svg.*>.*<\/svg>/.test(e.value)?(e.group=e.group||t.value||1e4,await y.post("/json/fonts",e),M.exports.forIn(p.value,((e,l)=>p.value[l]="")),p.value.group=void 0,ne.value=!1,await Be(),void l.success("添加成功!")):l.error("内容不符合 svg 标签格式"):l.error("名称不能为空")},We=async()=>{await Promise.all(qe.value.map((e=>y.patch(`/json/fonts/${e}`,te.value)))),await Be(),l.success("移动成功!"),ie.value=!1},Xe=async()=>{await y.post("/json/group",se.value),await Ve(),l.success("添加成功!"),re.value=!1};return w((()=>{Ve()})),(e,l)=>{const a=R,s=B,u=D,f=E,g=N,y=q,h=G,m=V,w=J,j=ae,M=K,ce=Q,Be=W,De=U,Ne=X,qe=Y,Ve=Z,Je=i;return d(),v(x,null,[_(De,{class:"rounded-3xl",title:"Fonts Administration",style:{height:"calc(100vh - 50px)","min-height":"470px"},bordered:!1},{default:b((()=>[_(Be,{"has-sider":"",class:"h-full"},{default:b((()=>[_(u,{width:176,bordered:""},{default:b((()=>[_("div",de,[_(a,{class:"my-24 w-128",type:"primary",onClick:l[1]||(l[1]=e=>re.value=!0)},{icon:b((()=>[_(P(C),null,{default:b((()=>[_(P(z))])),_:1})])),default:b((()=>[ve])),_:1}),_(s,{class:"w-full",value:t.value,"onUpdate:value":l[2]||(l[2]=e=>t.value=e),options:P(n)},null,8,["value","options"])])])),_:1}),_(ce,{class:"ml-24","content-style":"display: flex; flex-direction: column;height:100%","native-scrollbar":!1},{default:b((()=>[_(y,{class:"mb-12",action:"/upload-svgs",accept:".svg",name:"files","default-upload":!0,multiple:!0,data:{group:String(t.value||1e4),isRetainColor:String(oe.value)},onFinish:r},{default:b((()=>[_(g,null,{default:b((()=>[_("div",pe,[_(P(C),{size:"48",depth:3},{default:b((()=>[_(P(O))])),_:1})]),_(f,{class:"text-sm"},{default:b((()=>[fe])),_:1}),_("div",ge,[_(a,{class:"w-128",type:"primary",onClick:l[3]||(l[3]=S((e=>ne.value=!0),["stop"]))},{default:b((()=>[_(P(C),{class:"mr-2"},{default:b((()=>[_(P(T))])),_:1}),ye])),_:1})])])),_:1})])),_:1},8,["data"]),_("div",he,[_(m,{class:"items-center leading-none",size:"large"},{default:b((()=>[_(a,{class:"w-128",type:"primary",onClick:l[4]||(l[4]=e=>Me.value=!0)},{default:b((()=>[_(P(C),{class:"mr-2"},{default:b((()=>[_(P(L))])),_:1}),me])),_:1}),_(h,{checked:P(Ee),"onUpdate:checked":l[5]||(l[5]=e=>F(Ee)?Ee.value=e:null)},{default:b((()=>[we])),_:1},8,["checked"]),_(a,{text:"",onClick:Ke},{default:b((()=>[_e])),_:1}),_(a,{text:"",onClick:l[6]||(l[6]=e=>ie.value=!0)},{default:b((()=>[be])),_:1}),_(h,{checked:oe.value,"onUpdate:checked":l[7]||(l[7]=e=>oe.value=e)},{default:b((()=>[xe])),_:1},8,["checked"])])),_:1}),_(w,{class:"w-160",placeholder:"查询图标",value:c.value.text,"onUpdate:value":l[8]||(l[8]=e=>c.value.text=e),round:""},{suffix:b((()=>[_(P(C),{class:"cursor-pointer"},{default:b((()=>[_(P(A))])),_:1})])),_:1},8,["value"])]),_("div",ke,[_("div",Ce,[(d(!0),v(x,null,I(P(Re),((e,l)=>(d(),v(j,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:b((()=>[_(P(C),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:b((()=>[_("div",{class:"inline-block",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024),_(j,{tag:"div",class:"select-none"},{default:b((()=>[H(ee(e.key),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))]),P(Re).length?$("",!0):(d(),v(M,{key:0,class:"h-full flex justify-center",description:"你什么也找不到",size:"huge"}))])])),_:1})])),_:1})])),_:1}),_(Je,{show:ne.value,"onUpdate:show":l[13]||(l[13]=e=>ne.value=e),preset:"card",style:{width:"600px"},title:"新增 svg",size:"huge",bordered:!1},{default:b((()=>[_(Ve,{"label-placement":"left"},{default:b((()=>[_(Ne,{label:"名称",path:"key"},{default:b((()=>[_(w,{placeholder:"请输入 svg 名称",value:p.value.key,"onUpdate:value":l[9]||(l[9]=e=>p.value.key=e)},null,8,["value"])])),_:1}),_(Ne,{label:"内容",path:"key"},{default:b((()=>[_(w,{class:"h-112",value:p.value.value,"onUpdate:value":l[10]||(l[10]=e=>p.value.value=e),type:"textarea",placeholder:"请输入 svg 标签"},null,8,["value"])])),_:1}),_(Ne,{label:"分组"},{default:b((()=>[_(qe,{placeholder:"请选择分组(默认当前分组)",value:p.value.group,"onUpdate:value":l[11]||(l[11]=e=>p.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),_("div",je,[_(m,null,{default:b((()=>[_(a,{class:"w-112",onClick:l[12]||(l[12]=e=>ne.value=!1)},{default:b((()=>[Ue])),_:1}),_(a,{type:"primary",class:"w-112",onClick:Qe},{default:b((()=>[Pe])),_:1})])),_:1})])])),_:1},8,["show"]),_(Je,{show:ie.value,"onUpdate:show":l[16]||(l[16]=e=>ie.value=e),preset:"card",style:{width:"600px"},title:"移动分组",size:"huge",bordered:!1},{default:b((()=>[_(Ve,{class:"mb-24","label-placement":"left"},{default:b((()=>[_(Ne,{label:"分组"},{default:b((()=>[_(qe,{placeholder:"请选择分组",value:te.value.group,"onUpdate:value":l[14]||(l[14]=e=>te.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),_("div",ze,[_(m,null,{default:b((()=>[_(a,{class:"w-112",onClick:l[15]||(l[15]=e=>ie.value=!1)},{default:b((()=>[Oe])),_:1}),_(a,{type:"primary",class:"w-112",onClick:We},{default:b((()=>[Se])),_:1})])),_:1})])])),_:1},8,["show"]),_(Je,{show:re.value,"onUpdate:show":l[19]||(l[19]=e=>re.value=e),preset:"card",style:{width:"600px"},title:"新增分组",size:"huge",bordered:!1},{default:b((()=>[_(Ve,{class:"mb-24","label-placement":"left"},{default:b((()=>[_(Ne,{label:"名称"},{default:b((()=>[_(w,{placeholder:"请输入分组名称",value:se.value.label,"onUpdate:value":l[17]||(l[17]=e=>se.value.label=e)},null,8,["value"])])),_:1})])),_:1}),_("div",Te,[_(m,null,{default:b((()=>[_(a,{class:"w-112",onClick:l[18]||(l[18]=e=>re.value=!1)},{default:b((()=>[Le])),_:1}),_(a,{type:"primary",class:"w-112",onClick:Xe},{default:b((()=>[Fe])),_:1})])),_:1})])])),_:1},8,["show"]),_(Je,{show:Me.value,"onUpdate:show":l[22]||(l[22]=e=>Me.value=e),preset:"card",style:{width:"600px"},title:"导出 fonts",size:"huge",bordered:!1},{default:b((()=>[_(Ve,{class:"mb-24"},{default:b((()=>[_(Ne,{label:"导出 css 前缀"},{default:b((()=>[_(w,{placeholder:"请输入前缀（ 默认 'iconfont' ）",value:ue.value.prefix,"onUpdate:value":l[20]||(l[20]=e=>ue.value.prefix=e)},null,8,["value"])])),_:1}),_(Ne,{label:"选择分组"},{default:b((()=>[_("div",Ae,[(d(!0),v(x,null,I(o.value,((e,l)=>(d(),v(j,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:b((()=>[_(P(C),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:b((()=>[_(P(le))])),_:1}),_(j,{tag:"div",class:"select-none mt-1"},{default:b((()=>[_(P(k),{style:{"max-width":"80px"}},{default:b((()=>[H(ee(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])])),_:1}),_("div",Ie,[_(m,null,{default:b((()=>[_(a,{class:"w-112",onClick:l[21]||(l[21]=e=>Me.value=!1)},{default:b((()=>[$e])),_:1}),_(a,{type:"primary",class:"w-112",onClick:Ge},{default:b((()=>[He])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"])],64)}}});oe(r({setup:e=>(e,l)=>{const a=se,t=ue,s=te;return d(),v(s,{class:"xl:container"},{default:b((()=>[_(t,null,{default:b((()=>[_(a,null,{default:b((()=>[_(Me)])),_:1})])),_:1})])),_:1})}})).mount("#app");
