var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&o(e,a,l[a]);if(t)for(var a of t(l))u.call(l,a)&&o(e,a,l[a]);return e};import{_ as r,d as i,n as c,o as d,c as p,m as v,r as f,a as y,F as w,u as g,b as m,e as h,f as _,g as b,h as x,i as k,w as C,j,N as U,k as P,T as z,l as O,p as T,A as L,P as F,q as $,s as I,S as A,t as S,v as B,x as D,y as E,B as H,z as M,C as N,D as R,E as q,G,H as J,I as K,J as Q,K as V,L as W,M as X,O as Y,Q as Z,R as ee,U as le,V as ae,W as te,X as se}from"./vendor.757d8f3d.js";const ue={show:{type:Boolean,required:!0},vanish:Function,resolve:Function,reject:Function},oe=r.props;var ne=i({props:n(n({},ue),oe),setup:(e,{emit:l})=>{const a=e.show;a.value&&(a.value=!1,c((()=>a.value=!0)));return{props:e,onClone:()=>{var l,t;null==(l=e.reject)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},onConfirm:()=>{var l,t;null==(l=e.resolve)||l.call(e),a.value=!1,null==(t=e.vanish)||t.call(e)},show:a}}});ne.render=function(e,l,a,t,s,u){const o=r;return d(),p(o,v({preset:"dialog"},e.props,{show:e.show,"onUpdate:show":l[1]||(l[1]=l=>e.show=l),onPositiveClick:e.onConfirm,onNegativeClick:e.onClone}),null,16,["show","onPositiveClick","onNegativeClick"])};const re=e=>new Promise(((t,s)=>{var u,o;f(ne,(u=n({},e),o={show:y(!0),resolve:t,reject:s},l(u,a(o))))})),ie={class:"mr-24 flex flex-col items-center"},ce=D(" 新增分组 "),de={class:"flex justify-between"},pe=k("span",null,"上传 Svg",-1),ve=k("span",null,"导出 Fonts",-1),fe=D("全选"),ye=D("删除"),we=D("移动"),ge={class:"mt-20 flex-1"},me={class:"grid gap-24",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},he={class:"flex justify-end"},_e=D("取消"),be=D("确认"),xe={class:"flex justify-end"},ke=D("取消"),Ce=D("确认"),je={class:"flex justify-end"},Ue=D("取消"),Pe=D("确认"),ze={class:"grid gap-24 w-full",style:{"grid-template-columns":"repeat(auto-fill, 112px)"}},Oe={class:"flex justify-end"},Te=D("取消"),Le=D("确认");var Fe=i({expose:[],setup(e){w.defaults.loading=!0;const l=g();let a;m(w,(()=>{a||(a=l.loading("加载中....",{duration:0}))}),(()=>{a&&(a.destroy(),a=void 0)}));const t=y(0),s=y([{label:"全部",key:0},{label:"未分组",key:1e4}]),u=y([]),o=y([]),n=h((()=>[...s.value,...u.value])),i=y({text:""}),c=y({key:"",value:"",group:void 0}),v=y({group:void 0}),f=y({label:""}),le=y({prefix:""}),ae=y(!1),te=y(!1),se=y(!1),ue=y(!1),{list:oe,resetList:ne}=_({getList:async()=>{const{data:e}=await w.get("/json/fonts",{params:t.value&&{group:t.value}});return e},sources:[()=>i.value,()=>t.value]}),{selectItems:Fe,isSelectAll:$e}=b(oe),{selectItems:Ie}=b(o),Ae=h((()=>Fe.value.map((e=>e.id)))),Se=async()=>{Ie.value.length||l.warning("请选择分组!"),console.log(Ie.value);const{data:e}=await w.get("/out-fonts",{params:{prefix:le.value.prefix,ids:Ie.value.map((e=>e.value))},responseType:"arraybuffer"});((e,l)=>{const a=new Blob([e]),t=window.URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",`${l}.zip`),document.body.appendChild(s),s.click()})(e,"iconfont")},Be=async()=>{const{data:e}=await w.get("/json/group");u.value=e.map((e=>({label:()=>k("div",{class:"flex items-center justify-between"},[k(U,{style:"max-width: 90px;"},{default:()=>[k("span",null,[e.label])]}),k(P,{class:"-mt-4",size:"15px",onClick:l=>{De(e),l.stopPropagation()}},{default:()=>[k(z,null,null)]})]),key:e.id}))),o.value=[{label:"未分组",value:1,select:!0},...e.map((e=>({select:!0,label:e.label,value:e.id})))]},De=async e=>{await re({preset:"dialog",type:"warning",title:"提示",content:"你确定要删除该分组吗？",positiveText:"确定",negativeText:"不确定"}),await w.delete(`/json/group/${e.id}`);const{data:a}=await w.get("/json/fonts");await Promise.all(a.filter((l=>l.group===e.id)).map((e=>w.delete(`/json/fonts/${e.id}`)))),await Be(),l.success("删除成功!")},Ee=async()=>{await re({preset:"dialog",type:"warning",title:"提示",content:`你确定要删除当前 ${Fe.value.length} 項图标吗？`,positiveText:"确定",negativeText:"不确定"}),await Promise.all(Ae.value.map((e=>w.delete(`/json/fonts/${e}`)))),await ne(),l.success("删除成功!")},He=async()=>{const e=E.exports.cloneDeep(c.value);return e.value=e.value.replace(/fill="(.*)"/g,'fill="currentColor"').replace(/\n/g,"").trim(),e.key?/^<svg.*>.*<\/svg>/.test(e.value)?(e.group=e.group||1e4,await w.post("/json/fonts",e),E.exports.forIn(c.value,((e,l)=>c.value[l]="")),c.value.group=void 0,ae.value=!1,await ne(),void l.success("添加成功!")):l.error("内容不符合 svg 标签格式"):l.error("名称不能为空")},Me=async()=>{await Promise.all(Ae.value.map((e=>w.patch(`/json/fonts/${e}`,v.value)))),await ne(),l.success("移动成功!"),te.value=!1},Ne=async()=>{await w.post("/json/group",f.value),await Be(),l.success("添加成功!"),se.value=!1};return x((()=>{Be()})),(e,l)=>{const a=H,s=M,u=N,y=R,w=q,g=G,m=ee,h=J,_=K,b=Q,x=O,z=V,E=W,ne=X,re=r;return d(),p(j,null,[k(x,{class:"rounded-3xl",title:"Fonts Administration",style:{height:"calc(100vh - 50px)"},bordered:!1},{default:C((()=>[k(b,{"has-sider":"",class:"h-full"},{default:C((()=>[k(u,{width:176,bordered:""},{default:C((()=>[k("div",ie,[k(a,{class:"my-24 w-128",type:"primary",onClick:l[1]||(l[1]=e=>se.value=!0)},{icon:C((()=>[k(T(P),null,{default:C((()=>[k(T(L))])),_:1})])),default:C((()=>[ce])),_:1}),k(s,{class:"w-full",value:t.value,"onUpdate:value":l[2]||(l[2]=e=>t.value=e),options:T(n)},null,8,["value","options"])])])),_:1}),k(_,{class:"ml-24","content-style":"display: flex; flex-direction: column;"},{default:C((()=>[k("div",de,[k(w,{class:"items-center leading-none",size:"large"},{default:C((()=>[k(a,{class:"w-128",type:"primary",onClick:l[3]||(l[3]=e=>ae.value=!0)},{default:C((()=>[k(T(P),{class:"mr-2"},{default:C((()=>[k(T(F))])),_:1}),pe])),_:1}),k(a,{class:"w-128",type:"primary",onClick:l[4]||(l[4]=e=>ue.value=!0)},{default:C((()=>[k(T(P),{class:"mr-2"},{default:C((()=>[k(T($))])),_:1}),ve])),_:1}),k(y,{checked:T($e),"onUpdate:checked":l[5]||(l[5]=e=>I($e)?$e.value=e:null)},{default:C((()=>[fe])),_:1},8,["checked"]),k(a,{text:"",onClick:Ee},{default:C((()=>[ye])),_:1}),k(a,{text:"",onClick:l[6]||(l[6]=e=>te.value=!0)},{default:C((()=>[we])),_:1})])),_:1}),k(g,{class:"w-160",placeholder:"查询图标",value:i.value.text,"onUpdate:value":l[7]||(l[7]=e=>i.value.text=e),round:""},{suffix:C((()=>[k(T(P),{class:"cursor-pointer"},{default:C((()=>[k(T(A))])),_:1})])),_:1},8,["value"])]),k("div",ge,[k("div",me,[(d(!0),p(j,null,S(T(oe),((e,l)=>(d(),p(m,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(T(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k("div",{class:"inline-block",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024),k(m,{tag:"div",class:"select-none"},{default:C((()=>[D(Y(e.key),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))]),T(oe).length?B("",!0):(d(),p(h,{key:0,class:"h-full flex justify-center",description:"你什么也找不到",size:"huge"}))])])),_:1})])),_:1})])),_:1}),k(re,{show:ae.value,"onUpdate:show":l[12]||(l[12]=e=>ae.value=e),preset:"card",style:{width:"600px"},title:"新增 svg",size:"huge",bordered:!1},{default:C((()=>[k(ne,{"label-placement":"left"},{default:C((()=>[k(z,{label:"名称",path:"key"},{default:C((()=>[k(g,{placeholder:"请输入 svg 名称",value:c.value.key,"onUpdate:value":l[8]||(l[8]=e=>c.value.key=e)},null,8,["value"])])),_:1}),k(z,{label:"内容",path:"key"},{default:C((()=>[k(g,{class:"h-112",value:c.value.value,"onUpdate:value":l[9]||(l[9]=e=>c.value.value=e),type:"textarea",placeholder:"请输入 svg 标签"},null,8,["value"])])),_:1}),k(z,{label:"分组"},{default:C((()=>[k(E,{placeholder:"请选择分组(可选)",value:c.value.group,"onUpdate:value":l[10]||(l[10]=e=>c.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",he,[k(w,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[11]||(l[11]=e=>ae.value=!1)},{default:C((()=>[_e])),_:1}),k(a,{type:"primary",class:"w-112",onClick:He},{default:C((()=>[be])),_:1})])),_:1})])])),_:1},8,["show"]),k(re,{show:te.value,"onUpdate:show":l[15]||(l[15]=e=>te.value=e),preset:"card",style:{width:"600px"},title:"移动分组",size:"huge",bordered:!1},{default:C((()=>[k(ne,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(z,{label:"分组"},{default:C((()=>[k(E,{placeholder:"请选择分组",value:v.value.group,"onUpdate:value":l[13]||(l[13]=e=>v.value.group=e),options:o.value},null,8,["value","options"])])),_:1})])),_:1}),k("div",xe,[k(w,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[14]||(l[14]=e=>te.value=!1)},{default:C((()=>[ke])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Me},{default:C((()=>[Ce])),_:1})])),_:1})])])),_:1},8,["show"]),k(re,{show:se.value,"onUpdate:show":l[18]||(l[18]=e=>se.value=e),preset:"card",style:{width:"600px"},title:"新增分组",size:"huge",bordered:!1},{default:C((()=>[k(ne,{class:"mb-24","label-placement":"left"},{default:C((()=>[k(z,{label:"名称"},{default:C((()=>[k(g,{placeholder:"请输入分组名称",value:f.value.label,"onUpdate:value":l[16]||(l[16]=e=>f.value.label=e)},null,8,["value"])])),_:1})])),_:1}),k("div",je,[k(w,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[17]||(l[17]=e=>se.value=!1)},{default:C((()=>[Ue])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Ne},{default:C((()=>[Pe])),_:1})])),_:1})])])),_:1},8,["show"]),k(re,{show:ue.value,"onUpdate:show":l[21]||(l[21]=e=>ue.value=e),preset:"card",style:{width:"600px"},title:"导出 fonts",size:"huge",bordered:!1},{default:C((()=>[k(ne,{class:"mb-24"},{default:C((()=>[k(z,{label:"导出 css 前缀"},{default:C((()=>[k(g,{placeholder:"请输入前缀（ 默认 'iconfont' ）",value:le.value.prefix,"onUpdate:value":l[19]||(l[19]=e=>le.value.prefix=e)},null,8,["value"])])),_:1}),k(z,{label:"选择分组"},{default:C((()=>[k("div",ze,[(d(!0),p(j,null,S(o.value,((e,l)=>(d(),p(m,{key:l,onClick:l=>e.select=!e.select,class:[[e.select?"bg-gray-50 border border-primary text-primary":""],"cn-font__item"],tag:"div"},{default:C((()=>[k(T(P),{size:"35",class:"hover:text-primary transition-all duration-200"},{default:C((()=>[k(T(Z))])),_:1}),k(m,{tag:"div",class:"select-none mt-1"},{default:C((()=>[k(T(U),{style:{"max-width":"80px"}},{default:C((()=>[D(Y(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])])),_:1}),k("div",Oe,[k(w,null,{default:C((()=>[k(a,{class:"w-112",onClick:l[20]||(l[20]=e=>ue.value=!1)},{default:C((()=>[Te])),_:1}),k(a,{type:"primary",class:"w-112",onClick:Se},{default:C((()=>[Le])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"])],64)}}});se(i({expose:[],setup:e=>(e,l)=>{const a=ae,t=te,s=le;return d(),p(s,{class:"xl:container"},{default:C((()=>[k(t,null,{default:C((()=>[k(a,null,{default:C((()=>[k(Fe)])),_:1})])),_:1})])),_:1})}})).mount("#app");
